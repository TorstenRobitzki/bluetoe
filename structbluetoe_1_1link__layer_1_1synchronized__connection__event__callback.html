<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlueToe: bluetoe::link_layer::synchronized_connection_event_callback&lt; T, Obj, MaximumPeriodUS, PhaseShiftUS, MaximumExecutionTimeUS &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo_Bluetoe.svg"/></td>
  <td id="projectalign">
   <div id="projectname">BlueToe
   </div>
   <div id="projectbrief">an alternative GATT/BLE implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>bluetoe</b></li><li class="navelem"><b>link_layer</b></li><li class="navelem"><a class="el" href="structbluetoe_1_1link__layer_1_1synchronized__connection__event__callback.html">synchronized_connection_event_callback</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="structbluetoe_1_1link__layer_1_1synchronized__connection__event__callback-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">bluetoe::link_layer::synchronized_connection_event_callback&lt; T, Obj, MaximumPeriodUS, PhaseShiftUS, MaximumExecutionTimeUS &gt; Struct Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Install a callback that will be called with a maximum period synchronized to the connection events of established connections.  
 <a href="structbluetoe_1_1link__layer_1_1synchronized__connection__event__callback.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="connection__event__callback_8hpp_source.html">bluetoe/link_layer/include/bluetoe/connection_event_callback.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8a58e117551f4fccdecf5ccf6876aa2d"><td class="memItemLeft" align="right" valign="top"><a id="a8a58e117551f4fccdecf5ccf6876aa2d" name="a8a58e117551f4fccdecf5ccf6876aa2d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>stop_synchronized_connection_event_callbacks</b> ()</td></tr>
<tr class="memdesc:a8a58e117551f4fccdecf5ccf6876aa2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">stop the call of the synchronized callbacks. <br /></td></tr>
<tr class="separator:a8a58e117551f4fccdecf5ccf6876aa2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad524b19f2d348028678729418dfdb755"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbluetoe_1_1link__layer_1_1synchronized__connection__event__callback.html#ad524b19f2d348028678729418dfdb755">restart_synchronized_connection_event_callbacks</a> ()</td></tr>
<tr class="memdesc:ad524b19f2d348028678729418dfdb755"><td class="mdescLeft">&#160;</td><td class="mdescRight">restart the invocation of synchronized callbacks, after they where stopped.  <br /></td></tr>
<tr class="separator:ad524b19f2d348028678729418dfdb755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a0c78cd879332edc66ffdd42a5cdfe"><td class="memItemLeft" align="right" valign="top"><a id="ab7a0c78cd879332edc66ffdd42a5cdfe" name="ab7a0c78cd879332edc66ffdd42a5cdfe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>force_synchronized_connection_event_callback</b> ()</td></tr>
<tr class="memdesc:ab7a0c78cd879332edc66ffdd42a5cdfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ask Bluetoe to ignore the last return value of ll_synchronized_callback() and call the callback at the next possible time. <br /></td></tr>
<tr class="separator:ab7a0c78cd879332edc66ffdd42a5cdfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename T, T &amp; Obj, unsigned MaximumPeriodUS, int PhaseShiftUS, unsigned MaximumExecutionTimeUS = 100&gt;<br />
struct bluetoe::link_layer::synchronized_connection_event_callback&lt; T, Obj, MaximumPeriodUS, PhaseShiftUS, MaximumExecutionTimeUS &gt;</div><p>Install a callback that will be called with a maximum period synchronized to the connection events of established connections. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>has to be of class type and fulfil this set of requirements:</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>A public, default constructible type <code>connection</code></li>
<li><p class="startli">A public, none static member function:</p>
<p class="startli">unsigned ll_synchronized_callback( unsigned instant, connection&amp; )</p>
</li>
<li><p class="startli">Optional, T contains the following public, none static member functions:</p>
<p class="startli">connection ll_synchronized_callback_connect(
                 bluetoe::link_layer::delta_time connection_interval,
                 unsigned                        calls_per_interval )</p>
<p class="startli">void ll_synchronized_callback_period_update(
                 bluetoe::link_layer::delta_time connection_interval,
                 unsigned                        calls_per_interval,
                 connection&amp; )</p>
<p class="startli">void ll_synchronized_callback_disconnect( connection&amp; )</p>
</li>
</ul>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Obj</td><td>A reference to an instance of T on which the specified functions will be called.</td></tr>
    <tr><td class="paramname">MaximumPeriodUS</td><td>The maximum period at which the callback shall be called, given in µs. <pre class="fragment">    If MaximumPeriodUS is larger than the connections interval, the callback will be called
    with a period that is the greatest multiple of the connection interval, that is smaller
    than the connections interval.

    If MaximumPeriodUS is smaller than the current connections
    interval, the callback will be called multiple times with a fixed period. The period is
    chosen to be smaller than or equal to the given MaximumPeriodUS and so that a whole number
    of calls fit into the connection interval.

    Example: Connection Interval = 22.5ms, MaximumPeriodUS = 4ms
                 =&gt; Effective Period = 3.75ms (callback will be call 6 times)

    Example: Connection Interval = 22.5ms, MaximumPeriodUS = 60ms
                 =&gt; Effective Period = 45ms (callback will be call every second connection event)

    If the connections interval changes, the period at which the callback is called also
    changes. The callback will be called irrespectively of the connection event. Even when the
    connect event times out or is planned to not happen, due to peripheral latency applied.
</pre> </td></tr>
    <tr><td class="paramname">PhaseShiftUS</td><td>The offset to the connection anchor in µs. A positive value denotes that the call has to be called PhaseShiftUS µs after the anchor. Note, that in this case, high priority CPU processing near the connection event might interrupt the given callback invocation. A negative value denotes a call to the callback prior to the connection anchor by the given number of µs.</td></tr>
    <tr><td class="paramname">MaximumExecutionTimeUS</td><td>The estimated, maximum execution time of the callback. This helps the library to make sure, that the callback invocation in front of the connection event will return, before the connection event happens. If the hardware abstraction provides information about a minimum setup time, the library take that also into account.</td></tr>
  </table>
  </dd>
</dl>
<p>If PhaseShiftUS is negative, a compile time check tests that the execution of the callback will not run into the setup of the connection event.</p>
<p>Once a new connection is established, Obj.ll_synchronized_callback_connect() is called (if given) with the connection interval and the number of times, the callback will be called during one interval. ll_synchronized_callback_connect() have to return the initial value of <code>connection</code>.</p>
<p>If the connection is closed, Obj.ll_synchronized_callback_disconnect() is called with the instance of <code>connection</code> that was created by ll_synchronized_callback_connect(). If T does not provide ll_synchronized_callback_connect(), a <code>connection</code> is default constructed.</p>
<p>If the connection interval changes, Obj.ll_synchronized_callback_period_update() is called (if given) with the connection interval and the number of times, the callback will be called during one interval.</p>
<p>ll_synchronized_callback() will be call with the first parameter being 0 for the first invocation after the connection event and then with increased values until the value calls_per_interval - 1 is reached (calls_per_interval can be obtained by having ll_synchronized_callback_connect() and ll_synchronized_callback_period_update() defined). The return value of ll_synchronized_callback() denotes the number of times, the invocation of the callback should be omitted. For example, when ll_synchronized_callback() returns 2, two planned callback invocations are omitted until the callback is called again.</p>
<p>If the anchor is going to move due to a planned connection update procedure, there is danger of overlapping calls to the callback due to the uncertainty given by the range of transmission window size and offset. In this case, the last callback call before the instant of the update will be omitted. And the next time, the callback will be called, is after the first connection event with updated connection parameters toke place.</p>
<dl class="section note"><dt>Note</dt><dd>This feature requires support by the hardware abstraction and thus might not be available on all platforms.</dd>
<dd>
due to connection parameter updates, there is no guaranty, that the callback will be called with the requested MaximumPeriodUS.</dd>
<dd>
All callbacks will be called from the very same execution context (thus there is no need for synchronization between calls). The context is defined by the hardware and unspecified. </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad524b19f2d348028678729418dfdb755" name="ad524b19f2d348028678729418dfdb755"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad524b19f2d348028678729418dfdb755">&#9670;&#160;</a></span>restart_synchronized_connection_event_callbacks()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T , T &amp; Obj, unsigned MaximumPeriodUS, int PhaseShiftUS, unsigned MaximumExecutionTimeUS = 100&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structbluetoe_1_1link__layer_1_1synchronized__connection__event__callback.html">bluetoe::link_layer::synchronized_connection_event_callback</a>&lt; T, Obj, MaximumPeriodUS, PhaseShiftUS, MaximumExecutionTimeUS &gt;::restart_synchronized_connection_event_callbacks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>restart the invocation of synchronized callbacks, after they where stopped. </p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="structbluetoe_1_1link__layer_1_1synchronized__connection__event__callback.html#a8a58e117551f4fccdecf5ccf6876aa2d" title="stop the call of the synchronized callbacks.">stop_synchronized_connection_event_callbacks()</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>bluetoe/link_layer/include/bluetoe/<a class="el" href="connection__event__callback_8hpp_source.html">connection_event_callback.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 7 2023 13:18:53 for BlueToe by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
