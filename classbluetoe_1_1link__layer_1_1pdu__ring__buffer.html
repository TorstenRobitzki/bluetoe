<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlueToe: bluetoe::link_layer::pdu_ring_buffer&lt; Size, Buffer, Layout &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BlueToe
   </div>
   <div id="projectbrief">an alternative GATT/BLE implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>bluetoe</b></li><li class="navelem"><b>link_layer</b></li><li class="navelem"><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html">pdu_ring_buffer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">bluetoe::link_layer::pdu_ring_buffer&lt; Size, Buffer, Layout &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>structure, able to store variable sized link layer PDUs in a fixed size ring.  
 <a href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ring__buffer_8hpp_source.html">bluetoe/link_layer/include/bluetoe/ring_buffer.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a472a79cfa8ae104d7a9d9afdad809d8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a472a79cfa8ae104d7a9d9afdad809d8f">pdu_ring_buffer</a> (std::uint8_t *buffer)</td></tr>
<tr class="memdesc:a472a79cfa8ae104d7a9d9afdad809d8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets up the ring to be empty  <a href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a472a79cfa8ae104d7a9d9afdad809d8f">More...</a><br /></td></tr>
<tr class="separator:a472a79cfa8ae104d7a9d9afdad809d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b30dd307f31d2272b3827306a2facb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a75b30dd307f31d2272b3827306a2facb">reset</a> (std::uint8_t *buffer)</td></tr>
<tr class="memdesc:a75b30dd307f31d2272b3827306a2facb"><td class="mdescLeft">&#160;</td><td class="mdescRight">resets the ring to be empty  <a href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a75b30dd307f31d2272b3827306a2facb">More...</a><br /></td></tr>
<tr class="separator:a75b30dd307f31d2272b3827306a2facb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4297cca971ef28eb256123c86aea8083"><td class="memItemLeft" align="right" valign="top">Buffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a4297cca971ef28eb256123c86aea8083">alloc_front</a> (std::uint8_t *buffer, std::size_t <a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#ad85fb9032b33b0370644d775e4069d6d">size</a>) const</td></tr>
<tr class="memdesc:a4297cca971ef28eb256123c86aea8083"><td class="mdescLeft">&#160;</td><td class="mdescRight">return a writeable PDU buffer of at least size bytes at the front of the ring  <a href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a4297cca971ef28eb256123c86aea8083">More...</a><br /></td></tr>
<tr class="separator:a4297cca971ef28eb256123c86aea8083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae12b5061c6c5b5b60e2a1c5db2112fd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#ae12b5061c6c5b5b60e2a1c5db2112fd5">push_front</a> (std::uint8_t *buffer, const Buffer &amp;pdu)</td></tr>
<tr class="memdesc:ae12b5061c6c5b5b60e2a1c5db2112fd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">stores the allocated PDU in the ring.  <a href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#ae12b5061c6c5b5b60e2a1c5db2112fd5">More...</a><br /></td></tr>
<tr class="separator:ae12b5061c6c5b5b60e2a1c5db2112fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544c126da407e991926f7fcc575eaaef"><td class="memItemLeft" align="right" valign="top">Buffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a544c126da407e991926f7fcc575eaaef">next_end</a> () const</td></tr>
<tr class="memdesc:a544c126da407e991926f7fcc575eaaef"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the next PDU from the ring.  <a href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a544c126da407e991926f7fcc575eaaef">More...</a><br /></td></tr>
<tr class="separator:a544c126da407e991926f7fcc575eaaef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fc629f481cb5107aa65194242442731"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a2fc629f481cb5107aa65194242442731">pop_end</a> (std::uint8_t *buffer)</td></tr>
<tr class="memdesc:a2fc629f481cb5107aa65194242442731"><td class="mdescLeft">&#160;</td><td class="mdescRight">frees the last PDU at the end of the ring  <a href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a2fc629f481cb5107aa65194242442731">More...</a><br /></td></tr>
<tr class="separator:a2fc629f481cb5107aa65194242442731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2551806b9413513b6b399f620812d428"><td class="memItemLeft" align="right" valign="top"><a id="a2551806b9413513b6b399f620812d428" name="a2551806b9413513b6b399f620812d428"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>more_than_one</b> () const</td></tr>
<tr class="memdesc:a2551806b9413513b6b399f620812d428"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns true, if the buffer contains at least 2 elements <br /></td></tr>
<tr class="separator:a2551806b9413513b6b399f620812d428"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ad85fb9032b33b0370644d775e4069d6d"><td class="memItemLeft" align="right" valign="top"><a id="ad85fb9032b33b0370644d775e4069d6d" name="ad85fb9032b33b0370644d775e4069d6d"></a>
static constexpr std::size_t&#160;</td><td class="memItemRight" valign="bottom"><b>size</b> = Size</td></tr>
<tr class="memdesc:ad85fb9032b33b0370644d775e4069d6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">the size of the buffer in bytes <br /></td></tr>
<tr class="separator:ad85fb9032b33b0370644d775e4069d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;std::size_t Size, typename Buffer = read_buffer, typename Layout = default_pdu_layout&gt;<br />
class bluetoe::link_layer::pdu_ring_buffer&lt; Size, Buffer, Layout &gt;</div><p >structure, able to store variable sized link layer PDUs in a fixed size ring. </p>
<p >The buffer uses the size field of the stored PDUs as pointers to the next PDU stored in the buffer.</p>
<p >Elements are inserted at the front and removed from the end. When the ring buffer is empty it is garantied that the buffer can store one elemente of at least Size - 1 in size.</p>
<p >The Layout is used to access the header field of the PDU and to determin the in memory length of stored PDUs. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a472a79cfa8ae104d7a9d9afdad809d8f" name="a472a79cfa8ae104d7a9d9afdad809d8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a472a79cfa8ae104d7a9d9afdad809d8f">&#9670;&nbsp;</a></span>pdu_ring_buffer()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::size_t Size, typename Buffer , typename Layout &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html">bluetoe::link_layer::pdu_ring_buffer</a>&lt; Size, Buffer, Layout &gt;::<a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html">pdu_ring_buffer</a> </td>
          <td>(</td>
          <td class="paramtype">std::uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>sets up the ring to be empty </p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a544c126da407e991926f7fcc575eaaef" title="returns the next PDU from the ring.">next_end()</a>.size == 0 </dd>
<dd>
buffer must point to an array of at least Size bytes </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4297cca971ef28eb256123c86aea8083" name="a4297cca971ef28eb256123c86aea8083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4297cca971ef28eb256123c86aea8083">&#9670;&nbsp;</a></span>alloc_front()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::size_t Size, typename Buffer , typename Layout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Buffer <a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html">bluetoe::link_layer::pdu_ring_buffer</a>&lt; Size, Buffer, Layout &gt;::alloc_front </td>
          <td>(</td>
          <td class="paramtype">std::uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return a writeable PDU buffer of at least size bytes at the front of the ring </p>
<p >The function is idempotent and will yield the same results as long as the state of the buffer is not changed and the parameters are the same.</p>
<p >If there is not enough room for size bytes in the ring buffer, the function will return an empty <a class="el" href="structbluetoe_1_1link__layer_1_1read__buffer.html" title="type suitable to store the location and size of a chunk of memory that can be used to receive from th...">read_buffer</a>.</p>
<dl class="section pre"><dt>Precondition</dt><dd>size &gt; Layout::data_channel_pdu_memory_size( 0 ) </dd>
<dd>
buffer must point to an array of at least Size bytes </dd></dl>

</div>
</div>
<a id="a544c126da407e991926f7fcc575eaaef" name="a544c126da407e991926f7fcc575eaaef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a544c126da407e991926f7fcc575eaaef">&#9670;&nbsp;</a></span>next_end()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::size_t Size, typename Buffer , typename Layout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Buffer <a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html">bluetoe::link_layer::pdu_ring_buffer</a>&lt; Size, Buffer, Layout &gt;::next_end</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns the next PDU from the ring. </p>
<p >If no PDU is stored in the ring, the function will return an empty <a class="el" href="structbluetoe_1_1link__layer_1_1write__buffer.html" title="type suitable to store the location and size of a chunk of memory that can be used to transmit to the...">write_buffer</a>. </p>

</div>
</div>
<a id="a2fc629f481cb5107aa65194242442731" name="a2fc629f481cb5107aa65194242442731"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fc629f481cb5107aa65194242442731">&#9670;&nbsp;</a></span>pop_end()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::size_t Size, typename Buffer , typename Layout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html">bluetoe::link_layer::pdu_ring_buffer</a>&lt; Size, Buffer, Layout &gt;::pop_end </td>
          <td>(</td>
          <td class="paramtype">std::uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>frees the last PDU at the end of the ring </p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a544c126da407e991926f7fcc575eaaef" title="returns the next PDU from the ring.">next_end()</a>.size == 0 </dd></dl>

</div>
</div>
<a id="ae12b5061c6c5b5b60e2a1c5db2112fd5" name="ae12b5061c6c5b5b60e2a1c5db2112fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae12b5061c6c5b5b60e2a1c5db2112fd5">&#9670;&nbsp;</a></span>push_front()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::size_t Size, typename Buffer , typename Layout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html">bluetoe::link_layer::pdu_ring_buffer</a>&lt; Size, Buffer, Layout &gt;::push_front </td>
          <td>(</td>
          <td class="paramtype">std::uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Buffer &amp;&#160;</td>
          <td class="paramname"><em>pdu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stores the allocated PDU in the ring. </p>
<p >The length field of the PDU must contain the actual size of the PDU - 2. Now the stored PDU can be read through the ring.</p>
<dl class="section pre"><dt>Precondition</dt><dd>pdu.size &gt;= Layout::data_channel_pdu_memory_size( Layout::header( pdu ) &gt;&gt; 8 ) </dd>
<dd>
Layout::header( pdu ) &gt;&gt; 8 != 0 </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a544c126da407e991926f7fcc575eaaef" title="returns the next PDU from the ring.">next_end()</a>.size != 0 </dd></dl>

</div>
</div>
<a id="a75b30dd307f31d2272b3827306a2facb" name="a75b30dd307f31d2272b3827306a2facb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75b30dd307f31d2272b3827306a2facb">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::size_t Size, typename Buffer , typename Layout &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html">bluetoe::link_layer::pdu_ring_buffer</a>&lt; Size, Buffer, Layout &gt;::reset </td>
          <td>(</td>
          <td class="paramtype">std::uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>resets the ring to be empty </p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classbluetoe_1_1link__layer_1_1pdu__ring__buffer.html#a544c126da407e991926f7fcc575eaaef" title="returns the next PDU from the ring.">next_end()</a>.size == 0 </dd>
<dd>
buffer must point to an array of at least Size bytes </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>bluetoe/link_layer/include/bluetoe/<a class="el" href="ring__buffer_8hpp_source.html">ring_buffer.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 31 2021 12:39:45 for BlueToe by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
