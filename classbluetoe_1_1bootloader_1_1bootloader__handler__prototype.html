<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlueToe: bluetoe::bootloader::bootloader_handler_prototype Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo_Bluetoe.svg"/></td>
  <td id="projectalign">
   <div id="projectname">BlueToe
   </div>
   <div id="projectbrief">an alternative GATT/BLE implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>bluetoe</b></li><li class="navelem"><b>bootloader</b></li><li class="navelem"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html">bootloader_handler_prototype</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">bluetoe::bootloader::bootloader_handler_prototype Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Prototype for a handler, that adapts the bootloader service to the actual hardware.  
 <a href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="bootloader_8hpp_source.html">bluetoe/services/bootloader.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a822957fcebcd248eb14ea05206ea61f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370">bootloader::error_codes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#a822957fcebcd248eb14ea05206ea61f6">start_flash</a> (std::uintptr_t address, const std::uint8_t *values, std::size_t size)</td></tr>
<tr class="separator:a822957fcebcd248eb14ea05206ea61f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d65c9b3ce7b57f675c5ba1826b8d2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370">bootloader::error_codes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#a83d65c9b3ce7b57f675c5ba1826b8d2e">run</a> (std::uintptr_t start_addr)</td></tr>
<tr class="separator:a83d65c9b3ce7b57f675c5ba1826b8d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae298b6245d0f559a842d58a1d94c9a56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370">bootloader::error_codes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#ae298b6245d0f559a842d58a1d94c9a56">reset</a> ()</td></tr>
<tr class="separator:ae298b6245d0f559a842d58a1d94c9a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f245e25f261650029eac96d53e55337"><td class="memItemLeft" align="right" valign="top">std::pair&lt; const std::uint8_t *, std::size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#a6f245e25f261650029eac96d53e55337">get_version</a> ()</td></tr>
<tr class="separator:a6f245e25f261650029eac96d53e55337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8e7d73a0b1844dfa4b95ad3018602e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#ae8e7d73a0b1844dfa4b95ad3018602e2">read_mem</a> (std::uintptr_t address, std::size_t size, std::uint8_t *destination)</td></tr>
<tr class="separator:ae8e7d73a0b1844dfa4b95ad3018602e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99be86bb8960dc62e88cc70b09c11849"><td class="memItemLeft" align="right" valign="top">std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#a99be86bb8960dc62e88cc70b09c11849">checksum32</a> (std::uintptr_t start_addr, std::size_t size)</td></tr>
<tr class="separator:a99be86bb8960dc62e88cc70b09c11849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93649dce57bc62cbd1e21f0025e012ec"><td class="memItemLeft" align="right" valign="top">std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#a93649dce57bc62cbd1e21f0025e012ec">checksum32</a> (const std::uint8_t *start_addr, std::size_t size, std::uint32_t old_crc)</td></tr>
<tr class="separator:a93649dce57bc62cbd1e21f0025e012ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a566fcc2bc0ecd8eb00315cc7b440e3dc"><td class="memItemLeft" align="right" valign="top">std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#a566fcc2bc0ecd8eb00315cc7b440e3dc">checksum32</a> (std::uintptr_t start_addr)</td></tr>
<tr class="separator:a566fcc2bc0ecd8eb00315cc7b440e3dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab9e489df1a65327b481989daa8a6ed2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370">bootloader::error_codes</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#aab9e489df1a65327b481989daa8a6ed2">public_read_mem</a> (std::uintptr_t address, std::size_t size, std::uint8_t *destination)</td></tr>
<tr class="separator:aab9e489df1a65327b481989daa8a6ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a193ff91ca1f9ab074ae55f498d3ce0b3"><td class="memItemLeft" align="right" valign="top">std::uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbluetoe_1_1bootloader_1_1bootloader__handler__prototype.html#a193ff91ca1f9ab074ae55f498d3ce0b3">public_checksum32</a> (std::uintptr_t start_addr, std::size_t size)</td></tr>
<tr class="memdesc:a193ff91ca1f9ab074ae55f498d3ce0b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">version of checksum function, that will be directly called by the execution of the Get CRC procedure.  <br /></td></tr>
<tr class="separator:a193ff91ca1f9ab074ae55f498d3ce0b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b83a38d63011d42e7884f8e64a55721"><td class="memItemLeft" align="right" valign="top"><a id="a4b83a38d63011d42e7884f8e64a55721" name="a4b83a38d63011d42e7884f8e64a55721"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>control_point_notification_call_back</b> ()</td></tr>
<tr class="memdesc:a4b83a38d63011d42e7884f8e64a55721"><td class="mdescLeft">&#160;</td><td class="mdescRight">technical required function, that have to call bootloader_control_point_notification(), with the instance of the server <br /></td></tr>
<tr class="separator:a4b83a38d63011d42e7884f8e64a55721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1210f508a2df96ef05c4d049b0b442cb"><td class="memItemLeft" align="right" valign="top"><a id="a1210f508a2df96ef05c4d049b0b442cb" name="a1210f508a2df96ef05c4d049b0b442cb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>data_indication_call_back</b> ()</td></tr>
<tr class="memdesc:a1210f508a2df96ef05c4d049b0b442cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">technical required function, that have to call bootloader_data_indication(), with the instance of the server <br /></td></tr>
<tr class="separator:a1210f508a2df96ef05c4d049b0b442cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Prototype for a handler, that adapts the bootloader service to the actual hardware. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a93649dce57bc62cbd1e21f0025e012ec" name="a93649dce57bc62cbd1e21f0025e012ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93649dce57bc62cbd1e21f0025e012ec">&#9670;&#160;</a></span>checksum32() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::uint32_t bluetoe::bootloader::bootloader_handler_prototype::checksum32 </td>
          <td>(</td>
          <td class="paramtype">const std::uint8_t *&#160;</td>
          <td class="paramname"><em>start_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint32_t&#160;</td>
          <td class="paramname"><em>old_crc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>adds new data to the given crc </p>

</div>
</div>
<a id="a566fcc2bc0ecd8eb00315cc7b440e3dc" name="a566fcc2bc0ecd8eb00315cc7b440e3dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a566fcc2bc0ecd8eb00315cc7b440e3dc">&#9670;&#160;</a></span>checksum32() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::uint32_t bluetoe::bootloader::bootloader_handler_prototype::checksum32 </td>
          <td>(</td>
          <td class="paramtype">std::uintptr_t&#160;</td>
          <td class="paramname"><em>start_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>special overload to calculate the CRC over a start address </p>

</div>
</div>
<a id="a99be86bb8960dc62e88cc70b09c11849" name="a99be86bb8960dc62e88cc70b09c11849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99be86bb8960dc62e88cc70b09c11849">&#9670;&#160;</a></span>checksum32() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::uint32_t bluetoe::bootloader::bootloader_handler_prototype::checksum32 </td>
          <td>(</td>
          <td class="paramtype">std::uintptr_t&#160;</td>
          <td class="paramname"><em>start_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>calculate the checksum of the given range of memory. </p>

</div>
</div>
<a id="a6f245e25f261650029eac96d53e55337" name="a6f245e25f261650029eac96d53e55337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f245e25f261650029eac96d53e55337">&#9670;&#160;</a></span>get_version()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; const std::uint8_t *, std::size_t &gt; bluetoe::bootloader::bootloader_handler_prototype::get_version </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a custom string as response to the Get Version procedure. Make sure, that the response is not longer than 20 bytes, or othere wise it could get truncated on the link layer. </p>

</div>
</div>
<a id="a193ff91ca1f9ab074ae55f498d3ce0b3" name="a193ff91ca1f9ab074ae55f498d3ce0b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a193ff91ca1f9ab074ae55f498d3ce0b3">&#9670;&#160;</a></span>public_checksum32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::uint32_t bluetoe::bootloader::bootloader_handler_prototype::public_checksum32 </td>
          <td>(</td>
          <td class="paramtype">std::uintptr_t&#160;</td>
          <td class="paramname"><em>start_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>version of checksum function, that will be directly called by the execution of the Get CRC procedure. </p>
<dl class="section attention"><dt>Attention</dt><dd>If there are ranges that contain sensitiv information, make sure, that size is large enough, so that one can not get the content of the memory from the resulting CRC. In case, that such an attempt is detected, return a fixed value (0 for example). </dd></dl>

</div>
</div>
<a id="aab9e489df1a65327b481989daa8a6ed2" name="aab9e489df1a65327b481989daa8a6ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab9e489df1a65327b481989daa8a6ed2">&#9670;&#160;</a></span>public_read_mem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370">bootloader::error_codes</a> bluetoe::bootloader::bootloader_handler_prototype::public_read_mem </td>
          <td>(</td>
          <td class="paramtype">std::uintptr_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint8_t *&#160;</td>
          <td class="paramname"><em>destination</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used, when reading from memory, while the Read procedure is executed.</p>
<dl class="section attention"><dt>Attention</dt><dd>Make sure, that this function does not reveal any sensitiv information. Make sure, that address and size are resonable parameters.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>an value != <a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370a260ca9dd8a4577fc00b7bd5810298076">error_codes::success</a>, if read access to the given range is not possible or not authorized. </dd></dl>

</div>
</div>
<a id="ae8e7d73a0b1844dfa4b95ad3018602e2" name="ae8e7d73a0b1844dfa4b95ad3018602e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8e7d73a0b1844dfa4b95ad3018602e2">&#9670;&#160;</a></span>read_mem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluetoe::bootloader::bootloader_handler_prototype::read_mem </td>
          <td>(</td>
          <td class="paramtype">std::uintptr_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::uint8_t *&#160;</td>
          <td class="paramname"><em>destination</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>this is very handy, when it comes to testing... </p>

</div>
</div>
<a id="ae298b6245d0f559a842d58a1d94c9a56" name="ae298b6245d0f559a842d58a1d94c9a56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae298b6245d0f559a842d58a1d94c9a56">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370">bootloader::error_codes</a> bluetoe::bootloader::bootloader_handler_prototype::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>reset bootloader </p>

</div>
</div>
<a id="a83d65c9b3ce7b57f675c5ba1826b8d2e" name="a83d65c9b3ce7b57f675c5ba1826b8d2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d65c9b3ce7b57f675c5ba1826b8d2e">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370">bootloader::error_codes</a> bluetoe::bootloader::bootloader_handler_prototype::run </td>
          <td>(</td>
          <td class="paramtype">std::uintptr_t&#160;</td>
          <td class="paramname"><em>start_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run the program given at start_addr </p>

</div>
</div>
<a id="a822957fcebcd248eb14ea05206ea61f6" name="a822957fcebcd248eb14ea05206ea61f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a822957fcebcd248eb14ea05206ea61f6">&#9670;&#160;</a></span>start_flash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bootloader_8hpp.html#a44e1659e83283ae103c81831cd721370">bootloader::error_codes</a> bluetoe::bootloader::bootloader_handler_prototype::start_flash </td>
          <td>(</td>
          <td class="paramtype">std::uintptr_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::uint8_t *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start to flash</p>
<p>When the hardware signals, that the memory is flashed, end_flash( server) have to be called on the server instance </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>bluetoe/services/<a class="el" href="bootloader_8hpp_source.html">bootloader.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 21 2023 10:13:56 for BlueToe by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
